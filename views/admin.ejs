<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="/admin.css">

</head>

<body>
  <div class="profile-container">
    <!-- Home button outside admin container -->
    <div class="back-btn">
      <a href="/users/dashboard" class="btn btn-primary">ğŸ  Home</a>
    </div>

    <div class="admin-container">
         <a href="javascript:history.back()" class="btn btn-back">Go Back</a>

      <h1 class="admin-title">ğŸ›  Admin Dashboard</h1>
      <p class="admin-welcome">Welcome, <strong><%= currentUser.firstName %></strong> 
        <span class="role-admin">(<%= currentUser.role %>)</span>
      </p>
      
<!-- Admin Quick Actions -->
<div class="admin-actions">
  <h2 class="quick-actions-title">ğŸš€ Quick Actions</h2>
  <p class="quick-actions-subtitle">Manage your store with one click</p>
  <div class="action-buttons">
    <a href="/users/admin/products" class="btn btn-primary">ğŸ“¦ Manage Products</a>
    <a href="/users/admin/qr-codes" class="btn btn-info">ğŸ“± Manage QR Codes</a>
    <a href="/users/orders/history" class="btn btn-success">ğŸ“‹ View All Orders</a>
    <a href="/admin/reports/sales" class="btn btn-warning">ğŸ“Š Sales Reports</a>
  </div>
</div>

      <!-- Admin Statistics -->
      <div class="admin-stats">
        <div class="stat-card">
          <div class="stat-number"><%= users.length %></div>
          <div class="stat-label">Total Users</div>
        </div>
        <div class="stat-card">
          <div class="stat-number"><%= users.filter(u => u.role === 'admin').length %></div>
          <div class="stat-label">Admin Users</div>
        </div>
        <div class="stat-card">
          <div class="stat-number"><%= users.filter(u => u.role === 'customer').length %></div>
          <div class="stat-label">Customers</div>
        </div>
        <div class="stat-card">
          <div class="stat-number"><%= users.filter(u => u.accountStatus === 'active').length %></div>
          <div class="stat-label">Active Accounts</div>
        </div>
      </div>

      <!-- Users Table -->
      <div class="table-wrapper">
        <div class="table-header">
          <h3 class="table-title">ğŸ‘¥ User Management</h3>
          <a href="/users/admin/users" class="table-btn">
            Manage Users
          </a>
        </div>
        
        <table class="admin-table">
          <thead>
            <tr>
              <th>User ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Role</th>
              <th>Status</th>
              <th>Created</th>
            </tr>
          </thead>
          <tbody>
            <% users.forEach(user => { %>
              <tr>
                <td data-label="User ID">
                  <a href="/users/edit-user/<%= user.userId %>" class="user-link"><%= user.userId %></a>
                </td>
                <td data-label="Name"><%= user.firstName %> <%= user.lastName %></td>
                <td data-label="Email"><%= user.email %></td>
                <td data-label="Role">
                  <span class="<%= user.role === 'admin' ? 'role-admin' : 'role-customer' %>">
                    <%= user.role %>
                  </span>
                </td>
                <td data-label="Status">
                  <span class="<%= user.accountStatus === 'active' ? 'status-active' : 'status-inactive' %>">
                    <%= user.accountStatus %>
                  </span>
                </td>
                <td data-label="Created">
                  <%= user.createdAt instanceof Date ? user.createdAt.toLocaleDateString() : 'N/A' %>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>


    </div>
  </div>
</body>
</html>