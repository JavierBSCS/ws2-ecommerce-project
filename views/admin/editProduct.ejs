<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Edit Product</title>

  <style>
    body { background: #f2f6fc; font-family: Arial; padding: 40px; }
    .container {
      width: 500px; margin: auto; background: white; padding: 25px;
      border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    input, textarea, select {
      width: 100%; padding: 12px; margin: 10px 0;
      border: 1px solid #dcdde1; border-radius: 6px; font-size: 1rem;
    }
    button {
      width: 100%; background: #00b894; border: none; padding: 12px;
      color: white; border-radius: 6px; cursor: pointer; font-weight: bold;
    }
    button:hover { background: #55efc4; }
  </style>
</head>

<body>

<div class="container">
  <h2>✏️ Edit Product</h2>

  <form action="/users/admin/products/edit/<%= product._id %>" method="POST" enctype="multipart/form-data">

    <label>Name</label>
    <input type="text" name="name" value="<%= product.name %>" required>

    <label>Price</label>
    <input type="number" step="0.01" name="price" value="<%= product.price %>" required>

    <label>Category</label>
    <select name="category" required>
      <option value="Food" <%= product.category === "Food" ? "selected" : "" %>>Food</option>
      <option value="Cars" <%= product.category === "Cars" ? "selected" : "" %>>Cars</option>
      <option value="Electronics" <%= product.category === "Electronics" ? "selected" : "" %>>Electronics</option>
      <option value="Clothes" <%= product.category === "Clothes" ? "selected" : "" %>>Clothes</option>
      <option value="Home" <%= product.category === "Home" ? "selected" : "" %>>Home</option>
    </select>

    <label>Description</label>
    <textarea name="description" rows="4"><%= product.description %></textarea>
<label>Status</label>
<select name="status" required>
  <option value="available" <%= product.status === "available" ? "selected" : "" %>>Available</option>
  <option value="unavailable" <%= product.status === "unavailable" ? "selected" : "" %>>Unavailable</option>
  <option value="maintenance" <%= product.status === "maintenance" ? "selected" : "" %>>Under Maintenance</option>
</select>

<label>Stock</label>
<input type="number" name="stock" value="<%= product.stock %>" min="0">



    <label>Current Images</label><br>

    <% 
      let imgs = product.images && product.images.length ? product.images : 
                (product.imageUrl ? [product.imageUrl] : []);
    %>

    <% imgs.forEach(img => { %>
      <img src="<%= img %>" style="width:120px; height:120px; object-fit:cover; border-radius:8px; margin:10px;">
    <% }) %>

    <label>Upload New Image (optional)</label>
    <input type="file" name="image" accept="image/*">

    <label>OR Edit Image URLs (CSV)</label>
    <input type="text" name="images" value="<%= product.imagesCsv %>">

    <button type="submit">Save Changes</button>
  </form>

  <a href="/users/admin/products" class="back">⬅ Back to Products</a>
</div>

</body>
</html>
